### 为什么需要TLS
有时候，我们需要给每个线程分配单独的线程空间，但POSIX的线程接口不能很好的处理程序运行时动态生成的对象。为了解决这个问题，编程语言（例如C和C++）被拓展了，编译器和连接器会解决这个问题。例如C和C++中，关键字**__thread**说明了一个变量应为线程独立的。为此，运行程序的结构会发生改变，而动态加载器也要能够去初始化这些特殊的数据区域。这些线程本地的变量存储在.tbss和.tdata中。与普通的数据不同的是，动态链接器会为这些sections实现重定位，但其数据会被一直保存在镜像中，不会再修改。对于每个线程，都会生成新的内存，并拷贝这个镜像的内容，以保证每个线程中的数据是一致的。对于程序来说，PT_TLS文件段即为载入的tls数据内容。
### TLS运行时处理
TLS中变量依靠一个额外的数据结构来确定其各个变量在存储中的位移。它的指针存储在TCB中，这个数据结构包含了这个进程所需要的所有tls块的地址（静态和动态的）。动态链接器根据PT_TLS中的进行内存的载入。各个module的情况用一个链来保存。  
### TLS访问
利用__tls_get_addr函数，可以通过module ID和TLS块偏移量来获取地址。在64位中。
